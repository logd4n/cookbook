# Документация для проекта **"Моя кулинарная книга"** 


## **Оглавление**

1. [Общее описание](#Общее%20описание)
    
2. [Функциональность](#Функциональность)
    
3. Технический стек
    
4. Установка и запуск
    
5. API Endpoints
	
6. Структура проекта
    
7. Разработка

---

## **Общее описание**

Проект "Моя кулинарная книга" - это веб-приложение, позволяющее создавать, просматривать, хранить, редактировать и удалять рецепты разных категорий. Проект имеет приятный интерфейс для прямого взаимодействия с пользователем, а также базу данных для хранения рецептов.

Последняя версия проекта: <b><u>2.4.1</u></b> ([Файл с изменениями](Changelog.md))
Автор проекта: <b><u>LOG</u></b>  
Целевая аудитория: <b><u>Для личного пользования</u></b>

---

## **Функциональность**

### **Уже реализовано:**
1. ***Создание рецептов*** - возможность создавать рецепты, использую удобный интерфейс.
2. ***Поиск рецептов*** - можно получить ранее записанные данные.
3. ***Адаптивный дизайн*** - дизайн адаптируется под все устройства.
4. ***Уведомления*** - после действий с рецептами пользователь получит соответствующее уведомление.
5. ***Страница для создания рецептов*** - пользователь взаимодействует с элементами интерфейса, чтобы записать данные.
6. ***Страница для поиска рецептов*** - интерфейс для получения и чтения конкретных данных.
7. ***Возможность редактирования и удаления рецептов***
8. ***Работа в изолированном docker-контейнере***
9. ***Взаимодествие с БД*** 

### **В разработке:**
1. ***Полировка дизайна***
2. ***Сбор логов и их хранение в отдельном каталоге***
3. ***Работа с брокером сообщений (RabbitMQ)***  

---

## **Технический стек**

### Backend
- **Язык:** Go 1.22.4+
- **Фреймворк:** стандартная библиотека net/http
- **Базаданных:** PostgreSQL
- **Драйвер БД:** github.com/lib/pq
- **Контейнеризация:** Docker, docker-compose

### Frontend
- **HTML5** - семантическая разметка
- **CSS3** - кастомные стили с CSS переменными
- **JavaScript (ES6+)** - нативный JavaScript
- **Иконки:** Font Awesome 6.0
- **Шрифты:** Google Fonts (Montserrat, Playfair Display)

---

## Установка и запуск

### Предварительные требования
- Go 1.21 или выше
- PostgreSQL 12+
- Современный браузер

### Шаги установки

#### 1. **Клонирование репозитория**
   ```bash
   git clone https://github.com/logd4n/cookbook.git

   cd cookbook
   ```

#### 2. **Настройка базы данных**
   ```sql
   CREATE DATABASE cookbook;
   CREATE TABLE recipes (
       id SERIAL PRIMARY KEY,
       name TEXT NOT NULL,
       category TEXT NOT NULL,
       ingredients TEXT[] NOT NULL,
       instructions TEXT NOT NULL,
       );
   ```

#### 3. **Настройка окружения**

   #### 3.1 **Dockerfile (можно не настраивать)**
   
   Образ с Go 1.22.4+. В проекте я использовал образ golang:1.22.4-alpine для экономии памяти.

   Рабочая директория:
   ```Dockerfile
   WORKDIR /app <-- можно использовать свой каталог 
   ``` 

   Компиляция, выдача прав и запуск:
   ```Dockerfile
   RUN CGO_ENABLED=0 go build -ldflags="-w -s" -o cookbook ./cmd/main.go
   RUN chmod +x cookbook
   CMD ["./cookbook"]
   ```
   `Можете изменить название исполняемого файла`

   #### 3.2 **docker-compose**

   Убираем "(example)" из имени файла:
   ```
   docker-compose (example).yml --> docker-compose.yml
   ```
   #### а. Настраиваем сервис БД
   Задаем имя сервиса:
   ```yml
   database: #можно указать своё
   ```
   Выбираем образ:
   ```yml
   image: postgres:15

   postgres #Имя образа БД
   15 #Версия
   ```

   ``В проекте используется postgres:17.5``

   Настраиваем окружение:
   ```yml
   environment:
      POSTGRES_USER: username #указываем имя пользователя для работы с БД
      POSTGRES_PASSWORD: 1234567890 #пароль для доступа к БД
      POSTGRES_DB: test #имя БД 
   ```

   Указываем порты для соединения (хост:контейнер):
   ```yml
   ports:
      - "0000:0000" #Стандартный порт - 5432 (5432:5432)
   ```

   Указываем том для сохранения данных:
   ```yml
   volumes:
      - postgres_data:/var/lib/postgresql/data
   ```

   ``В файле уже указан данный путь, поэтому не меняем.``

   #### b. Настраиваем сервис веб-приложения

   Задаем имя сервиса:
   ```yml
   app: #можно указать своё
   ```
   Выбираем образ:
   ```yml
   image: app:1.0

   app #Имя образа веб-приложения
   1.0 #Тэг (версия)
   ```

   Настраиваем автосборку:
   ```yml
   build: .
   ```

   Указываем порты для работы (хост:контейнер):
   ```yml
   ports:
      - "0000:0000" #Стандартный порт - 8080 (8080:8080)
   ```

   Настраиваем окружение:
   ```yml
   environment:
      APP_VERSION: 1.0.0 #версия приложения
      SERVER_ADDR: 192.168.0.2:0000 #указываем адрес хоста и порт
      DB_USER: username #указываем имя пользователя для работы с БД
      DB_NAME: test #имя БД
      DB_PASS: 1234567890 #пароль для доступа к БД
      DB_HOST: database #указываем название сервиса БД
      DB_PORT: 0000 #указываем порт, на котром работает сервис БД (хост:контейнер)
      DB_SSLMODE: disable #выбираем SSL-мод
   ```

   Настраиваем запуск веб-приложения после запуска БД:
   ```yml
   depends_on:
      - database #имя сервиса БД
   ```

   #### c. Настраиваем тома для хранения данных
   
   ```yml
   volumes:
      postgres_data: #имя тома БД
   ```

   #### <br>4. **Запуск сервера**</br>
   
   ```bash
   docker-compose up -d --build
   ```

   #### <br>5. **Доступ к приложению**</br>
   - Локально: http://localhost:8080
   - В сети: http://[ваш-ip]:8080

   